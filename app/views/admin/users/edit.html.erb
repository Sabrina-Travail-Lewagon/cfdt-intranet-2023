<!-- app/views/admin/users/edit.html.erb -->
<div class="container mt-4">
  <div class="row">
      <h1>Modifier l'utilisateur</h1>

      <%= form_with(model: [@user], url: admin_user_path(@user), local: true, method: :patch) do |form| %>

        <% if @user.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(@user.errors.count, "erreur") %> ont été trouvées:</h2>
            <ul>
              <% @user.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <div class="form-inputs mb-3">
          <%= form.label :Prénom %>
          <%= form.text_field :first_name, class: "form-control" %>
        </div>

        <div class="form-inputs mb-3">
          <%= form.label :Nom %>
          <%= form.text_field :last_name, class: "form-control" %>
        </div>

        <div class="form-inputs mb-3">
          <%= form.label :email %>
          <%= form.email_field :email, class: "form-control" %>
        </div>

        <div class="form-inputs mb-3">
          <%= form.label :password %>
          <%= form.password_field :password,
            hint: t('devise.registrations.edit.leave_blank_if_you_dont_want_to_change_it'),
            label: "Mot de passe",
            required: false,
            input_html: { autocomplete: "nouveau mot de passe" },
            class: "form-control"
          %>
        </div>
        <div class="form-inputs mb-3">
          <%= form.label :password_confirmation %>
          <%= form.password_field :password_confirmation,
            hint: t('devise.registrations.edit.leave_blank_if_you_dont_want_to_change_it'),
            label: "Confirmation du mot de passe",
            required: false,
            input_html: { autocomplete: "nouveau mot de passe" },
            class: "form-control"
          %>
        </div>
        <div class="form-inputs mb-3">
          <%= form.label :photo, class: "form-label" %>
          <%= form.file_field :photo, class: "form-control" %>
        </div>
        <div class="form-inputs">
          <%= form.label :role %>
          <%= form.select :role, User.roles.keys, { prompt: "Modifier le rôle" }, class: "form-select" %>
        </div>

        <div class="actions py-4">
          <%= form.submit "Modifier", class:"btn btn-primary" %>
        </div>

      <% end %>
      <div class="actions my-2">
      <%= link_to 'Retour à la liste', admin_users_path, class: 'btn btn-secondary' %>
      </div>
  </div>
</div>
